<div class="container-fluid">
    <h2 class="mb-4">Registro de Asistencias</h2>

    <div *ngIf="loading" class="alert alert-info">
        <div class="spinner-border spinner-border-sm me-2" role="status"></div>
        Cargando asistencias...
    </div>

    <div *ngIf="error" class="alert alert-danger">
        {{ error }}
    </div>

    <div class="table-responsive" *ngIf="!loading && !error">
        <table class="table table-striped table-hover shadow-sm border">
            <thead class="table-dark">
                <tr>
                    <th>Fecha</th>
                    <th>Alumno</th>
                    <th>DNI</th>
                    <th>Materia</th>
                    <th>Estado</th>
                    <th>Justificada</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let asistencia of asistencias">
                    <td>{{ asistencia.asisFecha | date:'dd/MM/yyyy' }}</td>
                    <td>
                        {{ asistencia.inscripcion?.usuario?.usApellido }}, 
                        {{ asistencia.inscripcion?.usuario?.usNombre }}
                    </td>
                    <td>{{ asistencia.inscripcion?.usuario?.usDocumento }}</td>
                    <td>{{ asistencia.inscripcion?.materia?.matNombre }}</td>
                    <td>
                        <span class="badge" 
                            [ngClass]="{
                                'bg-success': asistencia.estadoAsistencia === 'Presente',
                                'bg-danger': asistencia.estadoAsistencia === 'Ausente',
                                'bg-warning text-dark': asistencia.estadoAsistencia === 'Llegada Tarde'
                            }">
                            {{ asistencia.estadoAsistencia }}
                        </span>
                    </td>
                    <td>
                        <span *ngIf="asistencia.asisJustificada" class="badge bg-info text-dark">SÃ­</span>
                        <span *ngIf="!asistencia.asisJustificada">-</span>
                    </td>
                </tr>
                <tr *ngIf="asistencias.length === 0">
                    <td colspan="6" class="text-center py-4">No hay registros de asistencia encontrados.</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>